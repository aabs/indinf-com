---
layout: post
title: Setting up SDB on SQL Server 2005
date: 2008-01-07 14:59:38.000000000 +11:00
type: post
published: true
status: publish
categories:
- .NET
- programming
- Semantic Web
tags: []
meta:
  delicious: a:3:{s:5:"count";s:1:"4";s:9:"post_tags";s:0:"";s:4:"time";s:10:"1321883086";}
  reddit: a:2:{s:5:"count";s:1:"0";s:4:"time";s:10:"1325628311";}
author:
  login: aabs
  email: matthews.andrew@gmail.com
  display_name: Andrew Matthews
  first_name: Andrew
  last_name: Matthews
---
<p><a href="http://aabs.files.wordpress.com/2008/01/image2.png"><img style="border-width:0;" height="343" alt="image" src="{{ site.baseurl }}/assets/image-thumb2.png" width="244" align="right" /></a>For the non-Java developer, like me, setting up and configuring SDB can be tricky. While it's fresh in my mind I'll commit it to blog so that those who come after will not tear their hair out like I just did.</p>
<p>SDB sits below Jena providing it with database support for a triple store rather than the more restrictive RDF XML file. The benefits of using a database are obvious, but the difficulties are not. the following instructions assume that you are running JRE 1.6, Vista and Cygwin. You need Cygwin to be able to run the batch files that come with SDB. You could probably adapt them to work on DOS, but Cygwin allows you to run the scripts as is.</p>
<p>Checklist:</p>
<ol>
<li>Get a copy of SDB &amp; put it somewhere handy (I chose C:\etc\downloads\dev\semantic-web\sdb-1.0)  </li>
<li>Get a <a href="http://www.microsoft.com/downloads/details.aspx?FamilyId=C47053EB-3B64-4794-950D-81E1EC91C1BA&amp;displaylang=en" target="_blank">JDBC driver</a> for SQL server.
<ol>
<li>copy it to the lib dir under SDB. I'm not sure why, but I had to do this&nbsp; despite the fact that there is an environment var that ought to be enough.</li>
</ol>
</li>
<li>Create a database for your triple store (I called mine TestTripleStore)
<ol>
<li>Remember that you must use binary collation (I chose Latin1_General_BIN).  </li>
<li>Create a user and login for the new database (I chose sdbuser).
<ol>
<li>Login as that user using SQL Management Studio - in case you need to change the user credentials on first login.</li>
</ol>
</li>
<li>Assign the new user ownership of the new triple store database.  </li>
<li><a href="http://blogs.msdn.com/sqlexpress/archive/2005/05/05/415084.aspx" target="_blank">Setup TCP/IP access</a> on your database server.</li>
</ol>
</li>
<li>setup the following environment variables using your .profile or .bashrc file (remember to source the file before you try to do anything)<br />SDBROOT="C:\etc\downloads\dev\semantic-web\sdb-1.0"<br />SDB_JDBC="$SDBROOT\lib\sqljdbc.jar"<br />SDB_USER="sdbuser"<br />SDB_PASSWORD="********" <br />Note the use of DOS/Windows style path declarations despite the use of Cygwin - this one always catches me out.  </li>
<li>write the SDB configuration file (sdb.ttl) and place it in the $SDBROOT directory. This is straightforward - just modify the server and database name as appropriate:<br />@prefix sdb:&nbsp;&nbsp;&nbsp;&nbsp; &lt;http://jena.hpl.hp.com/2007/sdb#&gt; .<br />@prefix rdfs:&nbsp;&nbsp;&nbsp;&nbsp; &lt;http://www.w3.org/2000/01/rdf-schema#&gt; .<br />@prefix rdf:&nbsp;&nbsp;&nbsp;&nbsp; &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt; .<br />@prefix ja:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;http://jena.hpl.hp.com/2005/11/Assembler#&gt; .
<p># Microsoft SQL Server  </p>
<p>_:c rdf:type sdb:SDBConnection ;<br />&nbsp;&nbsp;&nbsp; sdb:sdbType&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "MSSQLServer" ;<br />&nbsp;&nbsp;&nbsp; sdb:sdbHost&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "<u><em><strong>localhost</strong></em></u>" ;<br />&nbsp;&nbsp;&nbsp; sdb:sdbName&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "<strong><em><u>TestTripleStore</u></em></strong>" ;<br />&nbsp;&nbsp;&nbsp; sdb:driver&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "com.microsoft.sqlserver.jdbc.SQLServerDriver"<br />&nbsp;&nbsp;&nbsp; .  </p>
<p>[] rdf:type sdb:Store ;<br />&nbsp;&nbsp;&nbsp; sdb:layout&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "layout2" ;<br />&nbsp;&nbsp;&nbsp; sdb:connection&nbsp;&nbsp;&nbsp;&nbsp; _:c ;</p>
</li>
<li>
<p>Create the triple store for SDB:<br />sdbconfig --sdb=sdb.ttl create</p>
</li>
</ol>
<p>If all goes according to plan, you should get no errors and the following tables in SQL server.</p>
<p><a href="http://aabs.files.wordpress.com/2008/01/image1.png"><img style="border-width:0;" height="412" alt="image" src="{{ site.baseurl }}/assets/image-thumb1.png" width="603" /></a></p>
